# Certici Books

ì¹´ì¹´ì˜¤ ë„ì„œ ê²€ìƒ‰ APIë¥¼ í™œìš©í•œ ë„ì„œ ê²€ìƒ‰ ë° ì°œí•˜ê¸° ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

## ğŸ“– í”„ë¡œì íŠ¸ ê°œìš”

Certici BooksëŠ” ì‚¬ìš©ìê°€ ë„ì„œë¥¼ ê²€ìƒ‰í•˜ê³ , ê´€ì‹¬ ìˆëŠ” ë„ì„œë¥¼ ì°œí•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì¹´ì¹´ì˜¤ ë„ì„œ ê²€ìƒ‰ APIë¥¼ í™œìš©í•˜ì—¬ ì‹¤ì‹œê°„ ë„ì„œ ì •ë³´ë¥¼ ì œê³µí•˜ë©°, ë¬´í•œ ìŠ¤í¬ë¡¤ê³¼ ì˜ì†ì„± ìˆëŠ” ìƒíƒœ ê´€ë¦¬ë¥¼ í†µí•´ ë›°ì–´ë‚œ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

- ğŸ” **ë„ì„œ ê²€ìƒ‰**: ì œëª©, ISBN, ì¶œíŒì‚¬, ì €ìë³„ ê²€ìƒ‰ ì§€ì›
- â¤ï¸ **ì°œí•˜ê¸° ê¸°ëŠ¥**: ê´€ì‹¬ ìˆëŠ” ë„ì„œë¥¼ ì°œí•˜ì—¬ ê´€ë¦¬
- ğŸ“œ **ë¬´í•œ ìŠ¤í¬ë¡¤**: ê³ ì„±ëŠ¥ ë¬´í•œ ìŠ¤í¬ë¡¤ë¡œ ëŒ€ëŸ‰ì˜ ê²€ìƒ‰ ê²°ê³¼ ì²˜ë¦¬
- ğŸ“š **ìµœê·¼ ê²€ìƒ‰ ê¸°ë¡**: ì‚¬ìš©ìì˜ ê²€ìƒ‰ ê¸°ë¡ì„ ìë™ìœ¼ë¡œ ì €ì¥ ë° ê´€ë¦¬
- ğŸ”„ **ìƒíƒœ ë™ê¸°í™”**: URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì™€ ìƒíƒœ ë™ê¸°í™”ë¡œ ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸° ì§€ì›

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend

- **React Router 7**: íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ… ì‹œìŠ¤í…œ
- **TypeScript**: íƒ€ì… ì•ˆì •ì„± ë³´ì¥
- **Tailwind CSS v4**: ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ ìŠ¤íƒ€ì¼ë§
- **Vite**: ë¹ ë¥¸ ë¹Œë“œ ë° ê°œë°œ ì„œë²„

### ìƒíƒœ ê´€ë¦¬ & ë°ì´í„° í˜ì¹­

- **nuqs (ì»¤ìŠ¤í…€ í¬í¬)**: URL ì¿¼ë¦¬ ìƒíƒœ ê´€ë¦¬ (ìŠ¤í¬ë¡¤ ìœ ì§€ ë²„ê·¸ ìˆ˜ì •)
- **TanStack Query (React Query)**: ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë° ë¬´í•œ ìŠ¤í¬ë¡¤
- **Zustand**: í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬ (ì°œí•˜ê¸°, ê²€ìƒ‰ ê¸°ë¡)

### HTTP & UI

- **ky**: ê²½ëŸ‰ HTTP í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì € ì „ìš©, ì „ì—­ hooks ì§€ì›)
- **react-infinite-scroller**: ê³ ì„±ëŠ¥ ë¬´í•œ ìŠ¤í¬ë¡¤ UI
- **shadcn/ui**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ UI ì»´í¬ë„ŒíŠ¸

## âœ¨ ê°•ì¡°í•˜ê³  ì‹¶ì€ ê¸°ëŠ¥

### 1. nuqsë¥¼ ì´ìš©í•œ URL ì¿¼ë¦¬ ìƒíƒœ ê´€ë¦¬

ê²€ìƒ‰ì–´, ì •ë ¬ ì˜µì…˜, ê²€ìƒ‰ ëŒ€ìƒì„ URLì— ë™ê¸°í™”í•˜ì—¬ ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°/ì•ìœ¼ë¡œê°€ê¸°ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

**íŠ¹ë³„í•œ ì **: nuqs ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì»¤ìŠ¤í…€ í¬í¬í•˜ì—¬ React Router 7 í™˜ê²½ì—ì„œ ë¼ìš°í„° ë³€ê²½ ì‹œ ìŠ¤í¬ë¡¤ ìœ ì§€ ì´ìŠˆë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

```typescript
// app/constants/index.ts
export const BOOK_SEARCH_QUERY = {
  key: "bsq",
  schema: z.object({
    query: z.string().default(""),
    sort: z.enum(["accuracy", "latest"]).default("accuracy"),
    target: z.enum(["title", "isbn", "publisher", "person"]).default("title"),
  }),
};
```

### 2. ê³ ì„±ëŠ¥ ë¬´í•œ ìŠ¤í¬ë¡¤

TanStack Queryì˜ `useInfiniteQuery`ì™€ `react-infinite-scroller`ë¥¼ ê²°í•©í•˜ì—¬ í˜ì´ì§€ë„¤ì´ì…˜ì„ ìë™ ê´€ë¦¬í•©ë‹ˆë‹¤. ë¦¬ìŠ¤íŠ¸ê°€ ë§ì•„ì ¸ë„ ì„±ëŠ¥ ì €í•˜ê°€ ì—†ë„ë¡ ìµœì í™”ë˜ì—ˆìŠµë‹ˆë‹¤.

```typescript
// app/hooks/api/useGetBooks.ts
export const useGetInfiniteBooks = (searchQuery) => {
  return useInfiniteQuery({
    queryKey: [GET_BOOKS_KEY, searchQuery],
    queryFn: ({ pageParam = 1 }) =>
      searchBooks({ ...searchQuery, page: pageParam }),
    getNextPageParam: (lastPage, pages) =>
      lastPage.meta.is_end ? undefined : pages.length + 1,
    initialPageParam: 1,
    enabled: !!searchQuery.query,
  });
};
```

### 3. Zustand + localStorageë¥¼ í†µí•œ ì˜ì†ì„±

ì°œí•œ ì±… ê´€ë¦¬ì™€ ìµœê·¼ ê²€ìƒ‰ ê¸°ë¡ì„ localStorageì™€ ë™ê¸°í™”í•˜ì—¬ ë¸Œë¼ìš°ì €ë¥¼ ì¬ì‹¤í–‰í•´ë„ ë°ì´í„°ê°€ ìœ ì§€ë©ë‹ˆë‹¤.

```typescript
// app/stores/likeBooksStore.ts
const useLikeBooksStore = create<LikeBooksStore>()(
  persist(
    (set, get) => ({
      likedBooks: new Map(),
      addLikeBook: (book) => {
        /* Map êµ¬ì¡°ë¡œ ì¤‘ë³µ ë°©ì§€ */
      },
      removeLikeBook: (book) => {
        /* ì°œí•˜ê¸° ì·¨ì†Œ */
      },
    }),
    {
      name: "like-books-storage",
      storage: {
        // Mapì„ localStorageì— ì €ì¥í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ ë³€í™˜ ë¡œì§
        getItem: (name) => {
          /* Map <-> Array ë³€í™˜ */
        },
        setItem: (name, value) => {
          /* Array <-> Map ë³€í™˜ */
        },
      },
    }
  )
);
```

### 4. React Router 7 íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…

`app/routes/` ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ êµ¬ì¡°ê°€ ê·¸ëŒ€ë¡œ ë¼ìš°íŒ… êµ¬ì¡°ê°€ ë˜ì–´ ì§ê´€ì ì¸ ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```
app/routes/
â”œâ”€â”€ _main._index.tsx          # / (ë©”ì¸ ê²€ìƒ‰ í˜ì´ì§€)
â”œâ”€â”€ _main.likedbooks._index.tsx # /likedbooks (ì°œí•œ ì±… í˜ì´ì§€)
â””â”€â”€ _main.tsx                 # ê³µí†µ ë ˆì´ì•„ì›ƒ
```

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### í™˜ê²½ ì„¤ì •

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
# .env íŒŒì¼ ìƒì„± í›„ ì•„ë˜ ë‚´ìš© ì¶”ê°€
VITE_KAKAO_API_KEY=your_kakao_api_key_here
```

### ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
pnpm dev
```

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ `http://localhost:5173`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### í”„ë¡œë•ì…˜ ë¹Œë“œ

```bash
pnpm build
pnpm start
```

## ğŸ“ í´ë” êµ¬ì¡°

```
app/
â”œâ”€â”€ api/                      # API í•¨ìˆ˜ ë° íƒ€ì… ì •ì˜
â”œâ”€â”€ assets/                   # ì •ì  ë¦¬ì†ŒìŠ¤ (ì•„ì´ì½˜, ì´ë¯¸ì§€)
â”œâ”€â”€ components/               # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ BookListItem.tsx      # ë„ì„œ ì•„ì´í…œ (ì¶•ì†Œ/í™•ì¥ ë·°)
â”‚   â”œâ”€â”€ BookListSkeleton.tsx  # ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤
â”‚   â”œâ”€â”€ layout/               # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ typo/                 # íƒ€ì´í¬ê·¸ë˜í”¼ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ ui/                   # shadcn/ui ê¸°ë°˜ UI ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ constants/                # ìƒìˆ˜ ì •ì˜ (ì¿¼ë¦¬ í‚¤, ìŠ¤í‚¤ë§ˆ ë“±)
â”œâ”€â”€ hooks/                    # ì»¤ìŠ¤í…€ í›…
â”‚   â”œâ”€â”€ api/                  # API ê´€ë ¨ í›…
â”‚   â””â”€â”€ useGetLikedBooks.ts   # ì°œí•œ ì±… ì¡°íšŒ í›…
â”œâ”€â”€ lib/                      # ìœ í‹¸ë¦¬í‹° ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •
â”‚   â”œâ”€â”€ nuqs/                 # ì»¤ìŠ¤í…€ í¬í¬í•œ nuqs ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”œâ”€â”€ ky.ts                 # HTTP í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
â”‚   â””â”€â”€ query-client.ts       # React Query ì„¤ì •
â”œâ”€â”€ pages/                    # í˜ì´ì§€ë³„ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ main/                 # ë©”ì¸ ê²€ìƒ‰ í˜ì´ì§€
â”‚   â””â”€â”€ likedbooks/           # ì°œí•œ ì±… í˜ì´ì§€
â”œâ”€â”€ routes/                   # React Router 7 ë¼ìš°íŠ¸ ì •ì˜
â”œâ”€â”€ stores/                   # Zustand ìŠ¤í† ì–´
â”‚   â”œâ”€â”€ likeBooksStore.ts     # ì°œí•˜ê¸° ìƒíƒœ ê´€ë¦¬
â”‚   â””â”€â”€ searchQueryStore.ts   # ê²€ìƒ‰ ê¸°ë¡ ìƒíƒœ ê´€ë¦¬
â””â”€â”€ root.tsx                  # ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸
```

## ğŸ”§ ì£¼ìš” ì½”ë“œ ì„¤ëª…

### nuqs ì»¤ìŠ¤í…€ í¬í¬

`app/lib/nuqs/` ë””ë ‰í† ë¦¬ì— nuqs ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì»¤ìŠ¤í…€ ë²„ì „ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. React Router í™˜ê²½ì—ì„œ ë¼ìš°í„° ë³€ê²½ ì‹œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°€ ì´ˆê¸°í™”ë˜ëŠ” ë²„ê·¸ë¥¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

í•µì‹¬ ìˆ˜ì • íŒŒì¼:

- `useQueryState.ts`: ì¿¼ë¦¬ ìƒíƒœ ê´€ë¦¬ ë¡œì§
- `update-queue.ts`: URL ì—…ë°ì´íŠ¸ í ê´€ë¦¬

### ky HTTP í´ë¼ì´ì–¸íŠ¸ ì„¤ì •

```typescript
// app/lib/ky.ts
const API = ky.create({
  prefixUrl: "https://dapi.kakao.com/v3",
  hooks: {
    beforeRequest: [
      async (request) => {
        request.headers.set("Authorization", `KakaoAK ${KAKAO_API_KEY}`);
      },
    ],
    afterResponse: [
      async (request, options, response) => {
        if (import.meta.env.DEV && response.ok) {
          const responseData = await response.json();
          console.log(JSON.stringify(responseData, null, 2));
        }
      },
    ],
  },
});
```

## ğŸ¯ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ íƒ ì´ìœ 

### ky - ê²½ëŸ‰ HTTP í´ë¼ì´ì–¸íŠ¸

- **axios ëŒ€ë¹„ ì¥ì **: axiosëŠ” Node.js í™˜ê²½ê¹Œì§€ ì§€ì›í•˜ì—¬ ìƒëŒ€ì ìœ¼ë¡œ ë¬´ê±°ì›€
- **kyì˜ ì¥ì **: ë¸Œë¼ìš°ì € í™˜ê²½ë§Œ íƒ€ê²ŸíŒ…í•˜ì—¬ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ ì‘ìŒ
- **ì „ì—­ hooks ì§€ì›**: ì¸ì¦ í—¤ë” ë“±ì„ ì¼ê´„ ì²˜ë¦¬ ê°€ëŠ¥

### nuqs ì»¤ìŠ¤í…€ í¬í¬

- **ì‹¤ë¬´ ê²½í—˜**: React Routerì™€ nuqs ì‚¬ìš© ì‹œ ë¼ìš°í„° ë³€ê²½ ì‹œ ìŠ¤í¬ë¡¤ ìœ ì§€ ì•ˆë˜ëŠ” ì´ìŠˆ ë°œê²¬
- **í•´ê²° ë°©ë²•**: nuqs ì†ŒìŠ¤ì½”ë“œë¥¼ í¬í¬í•˜ì—¬ í•´ë‹¹ ë²„ê·¸ ìˆ˜ì •
- **ê²°ê³¼**: `app/lib/nuqs/` ë””ë ‰í† ë¦¬ì— ì»¤ìŠ¤í…€ ë²„ì „ í¬í•¨

### TanStack Query + react-infinite-scroller

- **useInfiniteQuery**: í˜ì´ì§€ë„¤ì´ì…˜ ìë™ ê´€ë¦¬
- **react-infinite-scroller**: ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ê°ì§€ ë° ìë™ ë¡œë”©
- **ìºì‹±ê³¼ ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸**: ë›°ì–´ë‚œ UX ì œê³µ
